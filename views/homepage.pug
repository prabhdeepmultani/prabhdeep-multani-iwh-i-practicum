doctype html
html(lang="en")
    head
        meta(charset="UTF-8")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        title= title || "LOTR Characters Archive"
        link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css")
        script(src="https://cdn.jsdelivr.net/npm/toastify-js")
        script(src="https://cdn.tailwindcss.com")
        link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css")
        link(href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&display=swap", rel="stylesheet")
        style.
            .bg-parchment {
                background-color: #f5f0e1;
                background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23dccebe' fill-opacity='0.2' fill-rule='evenodd'/%3E%3C/svg%3E");
            }
            .font-elvish {
                font-family: 'Cinzel', serif;
            }
            .parchment-table {
                background-color: rgba(255, 252, 242, 0.8);
                border: 1px solid #d6ba8c;
                box-shadow: 0 4px 8px rgba(120, 90, 40, 0.2);
            }
            .table-header {
                background-color: rgba(180, 130, 70, 0.2);
                border-bottom: 2px solid #b68d40;
            }
            .th-elvish {
                @apply px-8 py-4 text-left font-medium uppercase tracking-wider;
                color: #8b5e34;
                font-family: 'Cinzel', serif;
                font-size: 0.85rem;
                letter-spacing: 0.05em;
            }
            .btn-primary {
                @apply px-5 py-2 rounded-md font-bold text-amber-50 shadow-md;
                @apply transition duration-200 flex items-center justify-center;
                background-color: #8b5e34; 
                border: 1px solid #6d4824;
            }
            .btn-primary:hover {
                background-color: #6d4824;
                transform: translateY(-1px);
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            }
            .tr-alternating:nth-child(even) {
                background-color: rgba(222, 208, 182, 0.3);
            }
            .tr-alternating:hover {
                background-color: rgba(222, 184, 135, 0.2);
            }
            .td-content {
                padding: 10px;
                color: #5c4023;
            }
            .biography-cell {
            }
    body(class="bg-parchment min-h-screen")
        div(class="container mx-auto px-4 py-8 max-w-6xl")
            //- Header
            div(class="text-center mb-8")
                h1(class="text-4xl font-bold mb-2 font-elvish text-amber-900") The Chronicles of Middle-earth

            //- Action Button
            div(class="mb-6")
                a(href="/update-cobj" class="inline-block px-6 py-3 rounded-md font-bold text-amber-50 shadow-md transition duration-200 bg-amber-800 hover:bg-amber-900 border border-amber-900") 
                    span(class="flex items-center")
                        i(class="fas fa-quill mr-3")
                        span(class="font-elvish") Inscribe New Character

            //- Table
            if data && data.length
                div(class="overflow-x-auto parchment-table rounded-lg")
                    table(class="min-w-full divide-y divide-amber-200")
                        thead(class="table-header")
                            tr
                                th(class="th-elvish") Name
                                th(class="th-elvish") Race
                                th(class="th-elvish") Biography
                        tbody(class="divide-y divide-amber-200")
                            each item in data
                                tr(class="tr-alternating")
                                    td(class="td-content font-medium")
                                        div(class="flex items-center")
                                            span(class="font-elvish")= item.properties.name
                                    td(class="td-content")= item.properties.race
                                    td(class="td-content biography-cell")= item.properties.biography
            else
                div(class="text-center py-12 parchment-table rounded-lg")
                    div(class="flex flex-col items-center justify-center p-8")
                        i(class="fas fa-scroll text-5xl text-amber-700 mb-4")
                        p(class="text-amber-800 mb-2 font-elvish text-lg") The archives are empty
                        p(class="text-amber-700") No characters have been chronicled yet.
                        a(href="/update-cobj" class="btn-primary mt-6") 
                            i(class="fas fa-feather-alt mr-2")
                            | Begin the Chronicles
           
            //- Lore Quote
            div(class="mt-8 text-center text-sm text-amber-800 italic")
                | "History became legend. Legend became myth." â€” Galadriel
        
        if error
            script.
                Toastify({
                    text: '#{error}',
                    duration: 3000,
                    close: true,
                    gravity: "top",
                    position: "right",
                    style: { background: "#EF4444" }
                }).showToast();